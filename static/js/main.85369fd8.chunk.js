(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(4),o=n.n(a),i=(n(12),n(3)),s=(n(13),n(14),n(5)),u=n(1);function j(e){var t=e.onSubmitProp,n=Object(c.useState)(""),r=Object(i.a)(n,2),a=r[0],o=r[1];return Object(u.jsx)("header",{className:"Searchbar",children:Object(u.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==a.trim()?(t(a),o("")):s.b.error("enter something!")},children:[Object(u.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(u.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(u.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",placeholder:"Search images and photos",name:"pictureName",value:a,onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})}function l(e){var t=e.webformatURL,n=e.onOpen,c=e.largeImageURL;return Object(u.jsx)("li",{className:"ImageGalleryItem",onClick:function(){return n(c)},children:Object(u.jsx)("img",{src:t,alt:"",className:"ImageGalleryItem-image"})})}var b=function(e,t,n,c){return fetch("".concat(t,"?q=").concat(e,"&page=").concat(c,"&key=").concat(n,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()})).then((function(e){return e.hits}))},d=n(7),h=n.n(d);n(36);function m(){return Object(u.jsx)("div",{className:"spinner",children:Object(u.jsxs)("div",{children:[Object(u.jsx)(h.a,{type:"Circles",color:"#00BFFF",height:100,width:100,timeout:3e3}),"Loading..."]})})}function O(e){var t=e.onLoadMoreBtn;return Object(u.jsx)("div",{className:"load_more",children:Object(u.jsx)("button",{type:"submit",className:"Button ",onClick:t,children:"Load More"})})}var f=document.querySelector("#modal-root");function g(e){var t=e.onClose,n=e.children;Object(c.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&t()};return Object(a.createPortal)(Object(u.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(u.jsx)("div",{className:"Modal",children:n})}),f)}function p(e){var t=e.pictureName,n=Object(c.useState)(null),r=Object(i.a)(n,2),a=(r[0],r[1]),o=Object(c.useState)("idle"),s=Object(i.a)(o,2),j=s[0],d=s[1],h=Object(c.useState)([]),f=Object(i.a)(h,2),p=f[0],x=f[1],v=Object(c.useState)("https://pixabay.com/api/"),S=Object(i.a)(v,1)[0],y=Object(c.useState)("23171615-fcdc729843fe7af43a640cf8d"),w=Object(i.a)(y,1)[0],N=Object(c.useState)(1),L=Object(i.a)(N,2),k=L[0],C=L[1],E=Object(c.useState)(""),I=Object(i.a)(E,2),F=I[0],B=I[1],R=Object(c.useState)(!1),U=Object(i.a)(R,2),M=U[0],T=U[1];Object(c.useEffect)((function(){t&&(d("pending"),x([]),C(1),b(t,S,w,k).then((function(e){0===e.length&&d("rejected"),x(e)})).then(d("resolved")).catch((function(e){a(e),d("rejected")})))}),[S,x,w,k,t]),Object(c.useEffect)((function(){1!==k&&(d("pending"),b(t,S,w,k).then((function(e){if(0===e.length)return d("rejected");x(e)})).then(d("resolved")).then((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){a(e),d("rejected")})))}),[S,x,w,k,t,p]);var G=function(e){B(e),T(!0)};return"idle"===j?Object(u.jsx)("h1",{className:"title",children:" Enter what are you looking for."}):"pending"===j?Object(u.jsx)(m,{}):"rejected"===j?Object(u.jsxs)("h1",{className:"title",children:['By searching "',t,'" nothing found, sorry.',Object(u.jsx)("br",{}),"Try enter something else"]}):"resolved"===j?Object(u.jsxs)("div",{children:[Object(u.jsx)("ul",{className:"ImageGallery",children:p.map((function(e){return Object(u.jsx)(l,{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,onOpen:G},e.id)}))}),M&&Object(u.jsx)(g,{onClose:function(){T(!M)},children:Object(u.jsx)("img",{src:F,alt:"modal-img"})}),Object(u.jsx)(O,{onLoadMoreBtn:function(){C((function(e){return e+1}))}})]}):void 0}function x(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)(j,{onSubmitProp:r}),Object(u.jsx)(p,{pictureName:n}),Object(u.jsx)(s.a,{autoClose:3e3})]})}o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(x,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.85369fd8.chunk.js.map